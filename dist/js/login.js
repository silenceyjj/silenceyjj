"use strict";$(function(){$(".login-tab").on("click",function(){$(".login-tab").removeClass("cur"),$("#login-msg").css("display","none"),$(this).addClass("cur"),$(".login-by").css("display","none"),$(".login-by").eq($(this).index()).css("display","block"),$(".login-right ul").css("height",200),1==$(this).index()&&$(".login-right ul").css("height",140)});var t=randomCode();function a(){for(var i=(t=randomCode()).split(""),s=0;s<i.length;s++)$("#yzm-code span").eq(s).html(i[s]);$("#yzm-code").css("text-decoration-color",randomColor(16))}a(),$("#change").on("click",function(){a()});var n=!1;$("#yzm-txt").blur(function(){var i=$("#yzm-txt").val();$("#yzm_tip span").css("display","block"),$("#yzm_tip span").removeClass("suc yzmerr"),n=t.toLowerCase()==i?($("#yzm_tip span").addClass("suc"),!0):($("#yzm_tip span").addClass("yzmerr"),!1)}),$(".login-by").on("blur","input",function(){$(this).val().trim()?($("#login-msg").css("display","none"),$(".login-right ul").css("height",200)):($("#login-msg").css("display","block"),$(".login-right ul").css("height",252),"uname"==$(this).attr("id")?$("#login-msg").html("请输入用户名或者邮箱或者手机号！"):"upsw"==$(this).attr("id")?$("#login-msg").html("请输入密码！"):"yzm-txt"==$(this).attr("id")&&$("#login-msg").html("请输入验证码！"))}),$("#login").on("click",function(){$("#login-msg").css("display","block"),$(".login-right ul").css("height",252);var i=$("#uname").val(),s=$("#upsw").val();i.trim()?s.trim()?n?($("#login-msg").css("display","none"),$(".login-right ul").css("height",200),$.ajax({type:"post",url:"../api/01.reg&login.php",data:{m:"index",a:"login",mobileNum:i,password:s,nickname:i},success:function(i){var s=JSON.parse(i);if(s.code)a(),$("#login-msg").css("display","block"),$(".login-right ul").css("height",252),$("#login-msg").html(s.message);else if(cookie.get("nickname"))if(cookie.get("id"))for(var t=cookie.get("num"),n=cookie.get("id").split(","),l=t.split(","),o=function(t){$.ajax({type:"get",url:"../api/list.php",async:!0,data:{m:"detail",id:n[t]},success:function(i){var s=JSON.parse(i);$.ajax({type:"get",url:"../api/cart.php",data:{m:"list",uid:cookie.get("uid"),id:s[0].id,imgurl:s[0].imgurl,name:s[0].name,price:s[0].price,num:l[t]},async:!0,success:function(i){console.log(i);setInterval(function(){location.href="../index.html"})}})}})},e=0;e<n.length;e++)o(e);else{setInterval(function(){location.href="../index.html"})}}})):($("#yzm-txt").val().trim()||$("#login-msg").html("请输入验证码！"),$("#login-msg").html("验证码不正确！"),a()):$("#login-msg").html("请输入密码！"):$("#login-msg").html("请输入用户名或者邮箱或者手机号！")})});