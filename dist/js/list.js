"use strict";$(function(){var t=decodeURI(location.search).split("?")[1];$("#keyword").click(function(){$(this).focus(),$(this).val("")});var i=0,p=0;function c(a){$.ajax({type:"get",url:"../api/list.php",data:a,async:!0,success:function(t){!function(t,a){var n=JSON.parse(t);$(".pagination").html(""),p=Math.ceil(n.total/n.qty),i=a,$(".product_total").html("共"+n.total+"件商品"),$(".product_page_current").html(i),$(".product_page_total").html(p);for(var s=p;0<s;s--)s==a?$(".pagination").prepend('<a href="javascript:;" title="转到第'+s+'页" class="active">'+s+"</a>"):$(".pagination").prepend('<a href="javascript:;" title="转到第'+s+'页">'+s+"</a>");$(".pagination").prepend('<a href="javascript:;" title="上一页" class="pre_page">   上一页< </a>'),$(".pagination").append('<a href="javascript:;" title="下一页" class="next_page">   下一页 > </a>\n\t\t\t\t\t\t\t\t\t<a href="javascript:;" title="末页" class="last_page">末页</a>\n\t\t\t\t\t\t\t\t\t<span class="total_page">共'+p+'页</span>\n\t\t\t\t\t\t\t\t\t<span>到第&nbsp;&nbsp;<input type="text" class="go_page_text"/>&nbsp;&nbsp;页</span>\n\t\t\t\t\t\t\t\t\t<input type="button" id="goPages" value="确定" class="go_page_button">'),1==i&&$(".pagination .pre_page").remove(),i==p&&$(".pagination .next_page").remove(),$(".go_page_button").on("click",function(){i=$(".go_page_text").val(),(p<=i||isNaN(i))&&(i=p),e.page=i,c(e)}),$(".product_list").html(n.list.map(function(t){return'<li data-id="'+t.id+'">\n\t\t\t\t\t\t\t<div class="self-support"></div>\n\t\t\t\t\t\t\t<div class="product_list_container">\n\t\t\t\t\t\t\t\t<a href="javascript:;"><img src="'+t.imgurl+'" class="product_image"/></a>\n\t\t\t\t\t\t\t\t<p class="product_price">\n\t\t\t\t\t\t\t\t\t<strong>¥'+t.price+'</strong>\n\t\t\t\t\t\t\t\t\t<span class="price_unit" style="display: inline;"></span>\n\t\t\t\t\t\t\t\t\t<p class="product_price"></p>\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t<p class="product_name">\n\t\t\t\t\t\t\t\t\t<a href="javascript:;">'+t.name+'</a>\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t<p class="product_active"></p>\n\t\t\t\t\t\t\t\t<div class="product_status">\n\t\t\t\t\t\t\t\t\t<span class="product_status">\n\t\t\t\t\t\t\t\t\t\t已售'+t.sold+'\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t&nbsp;&nbsp;&nbsp;&nbsp;\n\t\t\t\t\t\t\t\t\t<a href="javascript:;" class="product_comment">\n\t\t\t\t\t\t\t\t\t\t已有\n\t\t\t\t\t\t\t\t\t\t<em>'+t.comment+'</em>\n\t\t\t\t\t\t\t\t\t\t人评价\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="operation">\n\t\t\t\t\t\t\t\t\t<div class="add_cart">\n\t\t\t\t\t\t\t\t\t\t<a href="javascript:;">\n\t\t\t\t\t\t\t\t\t\t\t<i class="icons icon_cart"></i>\n\t\t\t\t\t\t\t\t\t\t\t<span>加入购物车</span>\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="do_attention">\n\t\t\t\t\t\t\t\t\t\t<a href="javascript:;">\n\t\t\t\t\t\t\t\t\t\t\t<i class="icons icon_fav"></i>\n\t\t\t\t\t\t\t\t\t\t\t<span>收藏</span>\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</li>'}))}(t,a.page)}})}var e={m:"init",page:1,qty:20,keyword:t};c(e),$(".pagination").on("click","a",function(){isNaN(1*$(this).html())||(e.page=$(this).html(),c(e)),"next_page"==$(this).attr("class")&&(i++,e.page=i,c(e)),"pre_page"==$(this).attr("class")&&(i--,e.page=i,c(e)),"last_page"==$(this).attr("class")&&(i=p,e.page=i,c(e))}),$(".sort_right_right").on("click","a",function(){"prev_page"==$(this).attr("class")&&(i=1<--i?i:1,e.page=i,c(e)),"next_page"==$(this).attr("class")&&(i=++i>p?p:i,e.page=i,c(e))}),$(".sort_left").on("click","a",function(){e.m=$(this).attr("class"),e.page=1,c(e)}),$(".product_list").on("click","li",function(){var t=$(this).attr("data-id");location.href="../html/goods.html?"+t})});